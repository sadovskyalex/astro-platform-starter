<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Polish Match ‚Äî 10 —Å–ª–æ–≤</title>
  <style>
    :root{--bg:#ffffff;--muted:#6b7280;--scale:0.85}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;background:var(--bg);color:#111}
    header{padding:14px 16px;border-bottom:1px solid #e5e7eb;display:flex;gap:10px;align-items:center;justify-content:space-between}
    h1{font-size:18px;margin:0}
    .wrap{max-width:1100px;margin:0 auto;padding:16px;transform:scale(var(--scale));transform-origin:top center}

    .cols{display:grid;grid-template-columns:1fr 1fr 1fr;gap:18px}
    .col{border:2px solid #e5e7eb;border-radius:16px;padding:14px;min-height:420px}
    .col h3{margin:0 0 10px 0;font-size:14px;color:#374151}

    .tile{position:relative;display:flex;align-items:center;height:56px;user-select:none;padding:0 44px 0 12px;border-radius:14px;color:#fff;font-weight:700;font-size:20px;text-align:left;margin:10px 6px;cursor:grab;box-shadow:0 6px 0 #0000001a;transition:transform .05s ease;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .tile:active{cursor:grabbing;transform:scale(.98)}
    .c1{background:linear-gradient(#5bb8ff,#2c80d0)}
    .c2{background:linear-gradient(#ff6b6b,#c53a3a)}
    .c3{background:linear-gradient(#ffb454,#d8821b)}
    .c4{background:linear-gradient(#53c57a,#2a8b4b)}
    .c5{background:linear-gradient(#a78bfa,#6d28d9)}
    .c6{background:linear-gradient(#f472b6,#be185d)}
    .c7{background:linear-gradient(#60a5fa,#2563eb)}
    .c8{background:linear-gradient(#f59e0b,#b45309)}

    .prompt{position:relative;display:flex;align-items:center;height:56px;padding:0 44px 0 48px;border-radius:14px;background:#f3f4f6;color:#0f172a;font-weight:700;font-size:20px;text-align:left;margin:10px 6px;border:2px solid #e5e7eb;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .slot{height:56px;line-height:56px;margin:10px 6px;border:2px dashed #d1d5db;border-radius:14px;display:flex;align-items:center;justify-content:center;color:#9ca3af;font-weight:600}
    .slot.over{border-color:#60a5fa;background:#eef2ff}
    .slot.filled{border-style:solid}
    .slot.ok{border-color:#22c55e;background:#ecfdf5}
    .slot.bad{animation:shake .2s linear 2;border-color:#ef4444;background:#fef2f2}
    @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-4px)}75%{transform:translateX(4px)}}

    .controls{display:flex;gap:8px;align-items:center}
    button{padding:10px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#f8fafc;cursor:pointer}
    button:hover{background:#eef2f7}
    .footer{margin-top:12px;color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <header>
    <h1>Polish Match ‚Äî 3 –∫–æ–ª–æ–Ω–∫–∏</h1>
    <div class="controls">
      <button id="newRound">–ù–æ–≤—ã–π —Ä–∞—É–Ω–¥ (10)</button>
      <span id="status" style="color:#6b7280"></span>
    </div>
  </header>
  <div class="wrap">
    <div class="cols">
      <div class="col" id="colA">
        <h3>1) –°–ª–æ–≤–∞ (PL‚áÑRU, –≤–ø–µ—Ä–µ–º–µ—à–∫—É)</h3>
        <div id="prompts"></div>
      </div>
      <div class="col" id="colB">
        <h3>2) –ü–µ—Ä–µ—Ç–∞—â–∏ —Å—é–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥</h3>
        <div id="slots"></div>
      </div>
      <div class="col" id="colC">
        <h3>3) –ü–µ—Ä–µ–≤–æ–¥—ã (–≤ —Ä–∞–∑–±—Ä–æ—Å)</h3>
        <div id="choices" style="min-height:400px"></div>
      </div>
    </div>
    <div class="footer">–°–ª–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å –≤ —Å–ª–æ–≤–∞—Ä–µ: <span id="footCount">‚Ä¶</span></div>
  </div>

<script>
// ===== –£—Ç–∏–ª–∏—Ç—ã / —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const $=(s,e=document)=>e.querySelector(s); const $$=(s,e=document)=>Array.from(e.querySelectorAll(s));
const rnd=n=>Math.floor(Math.random()*n); const shuffle=a=>{for(let i=a.length-1;i>0;i--){const j=rnd(i+1);[a[i],a[j]]=[a[j],a[i]]}return a};
const LS_KEY='plmatch_learned_v2';
const loadLearned=()=>{ try{ return new Set(JSON.parse(localStorage.getItem(LS_KEY)||'[]')); }catch{ return new Set(); } };
const saveLearned=set=>{ try{ localStorage.setItem(LS_KEY, JSON.stringify(Array.from(set))); }catch{} };
let LEARNED = loadLearned();

// ===== –ë–ê–ó–û–í–´–ô –°–õ–û–í–ê–†–¨ (~220)
const WORDS=[
  // —Å–ª—É–∂–µ–±–Ω—ã–µ/—á–∞—Å—Ç–∏—Ü—ã/—Å–æ—é–∑—ã/–Ω–∞—Ä–µ—á–∏—è
  {pl:'i',ru:'–∏'},{pl:'a',ru:'–∞'},{pl:'oraz',ru:'–∞ —Ç–∞–∫–∂–µ'},{pl:'albo',ru:'–∏–ª–∏'},{pl:'lub',ru:'–∏–ª–∏'},{pl:'lecz',ru:'–Ω–æ'},{pl:'≈ºe',ru:'—á—Ç–æ'},{pl:'≈ºeby',ru:'—á—Ç–æ–±—ã'},{pl:'wiƒôc',ru:'–∑–Ω–∞—á–∏—Ç, –ø–æ—ç—Ç–æ–º—É'},{pl:'poniewa≈º',ru:'–ø–æ—Ç–æ–º—É —á—Ç–æ'},
  {pl:'chocia≈º',ru:'—Ö–æ—Ç—è'},{pl:'gdy',ru:'–∫–æ–≥–¥–∞'},{pl:'gdy≈º',ru:'–∏–±–æ'},{pl:'je≈õli',ru:'–µ—Å–ª–∏'},{pl:'je≈ºeli',ru:'–µ—Å–ª–∏'},{pl:'bo',ru:'–ø–æ—Ç–æ–º—É —á—Ç–æ'},{pl:'ani',ru:'–Ω–∏'},{pl:'czy',ru:'–ª–∏/–∏–ª–∏'},{pl:'tymczasem',ru:'—Ç–µ–º –≤—Ä–µ–º–µ–Ω–µ–º'},{pl:'dlatego',ru:'–ø–æ—ç—Ç–æ–º—É'},
  {pl:'tak',ru:'—Ç–∞–∫/–¥–∞'},{pl:'nie',ru:'–Ω–µ—Ç/–Ω–µ'},{pl:'ju≈º',ru:'—É–∂–µ'},{pl:'jeszcze',ru:'–µ—â—ë'},{pl:'teraz',ru:'—Å–µ–π—á–∞—Å'},{pl:'wtedy',ru:'—Ç–æ–≥–¥–∞'},{pl:'zawsze',ru:'–≤—Å–µ–≥–¥–∞'},{pl:'nigdy',ru:'–Ω–∏–∫–æ–≥–¥–∞'},{pl:'czƒôsto',ru:'—á–∞—Å—Ç–æ'},{pl:'rzadko',ru:'—Ä–µ–¥–∫–æ'},
  {pl:'dobrze',ru:'—Ö–æ—Ä–æ—à–æ'},{pl:'≈∫le',ru:'–ø–ª–æ—Ö–æ'},{pl:'bardzo',ru:'–æ—á–µ–Ω—å'},{pl:'bardziej',ru:'–±–æ–ª—å—à–µ'},{pl:'mniej',ru:'–º–µ–Ω—å—à–µ'},{pl:'du≈ºo',ru:'–º–Ω–æ–≥–æ'},{pl:'ma≈Ço',ru:'–º–∞–ª–æ'},{pl:'tutaj',ru:'–∑–¥–µ—Å—å'},{pl:'tam',ru:'—Ç–∞–º'},{pl:'stƒÖd',ru:'–æ—Ç—Å—é–¥–∞'},
  {pl:'gdzie',ru:'–≥–¥–µ'},{pl:'kiedy',ru:'–∫–æ–≥–¥–∞'},{pl:'dlaczego',ru:'–ø–æ—á–µ–º—É'},{pl:'jak',ru:'–∫–∞–∫'},{pl:'po co',ru:'–∑–∞—á–µ–º'},{pl:'razem',ru:'–≤–º–µ—Å—Ç–µ'},{pl:'p√≥≈∫niej',ru:'–ø–æ–∑–∂–µ'},{pl:'wcze≈õniej',ru:'—Ä–∞–Ω—å—à–µ'},{pl:'zaraz',ru:'—Å–∫–æ—Ä–æ'},{pl:'natychmiast',ru:'–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ'},
  {pl:'szybko',ru:'–±—ã—Å—Ç—Ä–æ'},{pl:'powoli',ru:'–º–µ–¥–ª–µ–Ω–Ω–æ'},
  // –ø—Ä–µ–¥–ª–æ–≥–∏
  {pl:'w',ru:'–≤'},{pl:'na',ru:'–Ω–∞'},{pl:'do',ru:'–∫/–≤'},{pl:'z',ru:'—Å/–∏–∑'},{pl:'ze',ru:'—Å/–∏–∑'},{pl:'od',ru:'–æ—Ç'},{pl:'u',ru:'—É'},{pl:'o',ru:'–æ'},{pl:'po',ru:'–ø–æ/–ø–æ—Å–ª–µ'},{pl:'bez',ru:'–±–µ–∑'},
  {pl:'dla',ru:'–¥–ª—è'},{pl:'przez',ru:'—á–µ—Ä–µ–∑'},{pl:'nad',ru:'–Ω–∞–¥'},{pl:'pod',ru:'–ø–æ–¥'},{pl:'przed',ru:'–ø–µ—Ä–µ–¥'},{pl:'za',ru:'–∑–∞'},{pl:'miƒôdzy',ru:'–º–µ–∂–¥—É'},{pl:'oko≈Ço',ru:'–æ–∫–æ–ª–æ'},{pl:'wok√≥≈Ç',ru:'–≤–æ–∫—Ä—É–≥'},{pl:'podczas',ru:'–≤–æ –≤—Ä–µ–º—è'},
  {pl:'przeciw',ru:'–ø—Ä–æ—Ç–∏–≤'},{pl:'wed≈Çug',ru:'—Å–æ–≥–ª–∞—Å–Ω–æ'},{pl:'opr√≥cz',ru:'–∫—Ä–æ–º–µ'},
  // –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è / —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–µ / –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ
  {pl:'ja',ru:'—è'},{pl:'ty',ru:'—Ç—ã'},{pl:'on',ru:'–æ–Ω'},{pl:'ona',ru:'–æ–Ω–∞'},{pl:'ono',ru:'–æ–Ω–æ'},{pl:'my',ru:'–º—ã'},{pl:'wy',ru:'–≤—ã'},{pl:'oni',ru:'–æ–Ω–∏ (–º—É–∂./—Å–º–µ—à.)'},{pl:'one',ru:'–æ–Ω–∏ (–∂–µ–Ω.)'},
  {pl:'m√≥j',ru:'–º–æ–π'},{pl:'tw√≥j',ru:'—Ç–≤–æ–π'},{pl:'jego',ru:'–µ–≥–æ'},{pl:'jej',ru:'–µ—ë'},{pl:'nasz',ru:'–Ω–∞—à'},{pl:'wasz',ru:'–≤–∞—à'},{pl:'ich',ru:'–∏—Ö'},
  {pl:'ten',ru:'—ç—Ç–æ—Ç'},{pl:'ta',ru:'—ç—Ç–∞'},{pl:'to',ru:'—ç—Ç–æ'},{pl:'tamten',ru:'—Ç–æ—Ç'},{pl:'taki',ru:'—Ç–∞–∫–æ–π'},{pl:'kt√≥ry',ru:'–∫–æ—Ç–æ—Ä—ã–π'},{pl:'jaki',ru:'–∫–∞–∫–æ–π'},
  {pl:'kto',ru:'–∫—Ç–æ'},{pl:'co',ru:'—á—Ç–æ'},{pl:'nikt',ru:'–Ω–∏–∫—Ç–æ'},{pl:'nic',ru:'–Ω–∏—á–µ–≥–æ'},{pl:'kto≈õ',ru:'–∫—Ç–æ-—Ç–æ'},{pl:'co≈õ',ru:'—á—Ç–æ-—Ç–æ'},
  // —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ 1‚Äì10
  {pl:'jeden',ru:'–æ–¥–∏–Ω'},{pl:'dwa',ru:'–¥–≤–∞'},{pl:'trzy',ru:'—Ç—Ä–∏'},{pl:'cztery',ru:'—á–µ—Ç—ã—Ä–µ'},{pl:'piƒôƒá',ru:'–ø—è—Ç—å'},{pl:'sze≈õƒá',ru:'—à–µ—Å—Ç—å'},{pl:'siedem',ru:'—Å–µ–º—å'},{pl:'osiem',ru:'–≤–æ—Å–µ–º—å'},{pl:'dziewiƒôƒá',ru:'–¥–µ–≤—è—Ç—å'},{pl:'dziesiƒôƒá',ru:'–¥–µ—Å—è—Ç—å'},
  // –≥–ª–∞–≥–æ–ª—ã –±–∞–∑–æ–≤—ã–µ
  {pl:'mieƒá',ru:'–∏–º–µ—Ç—å'},{pl:'byƒá',ru:'–±—ã—Ç—å'},{pl:'robiƒá',ru:'–¥–µ–ª–∞—Ç—å'},{pl:'m√≥wiƒá',ru:'–≥–æ–≤–æ—Ä–∏—Ç—å'},{pl:'wiedzieƒá',ru:'–∑–Ω–∞—Ç—å'},
  {pl:'widzieƒá',ru:'–≤–∏–¥–µ—Ç—å'},{pl:'chcieƒá',ru:'—Ö–æ—Ç–µ—Ç—å'},{pl:'i≈õƒá',ru:'–∏–¥—Ç–∏'},{pl:'daƒá',ru:'–¥–∞—Ç—å'},{pl:'braƒá',ru:'–±—Ä–∞—Ç—å'},
  {pl:'je≈õƒá',ru:'–µ—Å—Ç—å (–ø–∏—â—É)'},{pl:'piƒá',ru:'–ø–∏—Ç—å'},{pl:'kupowaƒá',ru:'–ø–æ–∫—É–ø–∞—Ç—å'},{pl:'sprzedawaƒá',ru:'–ø—Ä–æ–¥–∞–≤–∞—Ç—å'},{pl:'czytaƒá',ru:'—á–∏—Ç–∞—Ç—å'},
  {pl:'pisaƒá',ru:'–ø–∏—Å–∞—Ç—å'},{pl:'uczyƒá siƒô',ru:'—É—á–∏—Ç—å—Å—è'},{pl:'rozumieƒá',ru:'–ø–æ–Ω–∏–º–∞—Ç—å'},{pl:'otwieraƒá',ru:'–æ—Ç–∫—Ä—ã–≤–∞—Ç—å'},{pl:'zamykaƒá',ru:'–∑–∞–∫—Ä—ã–≤–∞—Ç—å'},
  {pl:'zaczynaƒá',ru:'–Ω–∞—á–∏–Ω–∞—Ç—å'},{pl:'ko≈Ñczyƒá',ru:'–∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å'},{pl:'pracowaƒá',ru:'—Ä–∞–±–æ—Ç–∞—Ç—å'},{pl:'odpoczywaƒá',ru:'–æ—Ç–¥—ã—Ö–∞—Ç—å'},{pl:'spaƒá',ru:'—Å–ø–∞—Ç—å'},
  {pl:'biegaƒá',ru:'–±–µ–≥–∞—Ç—å'},{pl:'chodziƒá',ru:'—Ö–æ–¥–∏—Ç—å'},{pl:'jechaƒá',ru:'–µ—Ö–∞—Ç—å'},{pl:'lubiƒá',ru:'–ª—é–±–∏—Ç—å (–Ω—Ä–∞–≤–∏—Ç—å—Å—è)'},{pl:'kochaƒá',ru:'–ª—é–±–∏—Ç—å (—Å–∏–ª—å–Ω–æ)'},
  {pl:'my≈õleƒá',ru:'–¥—É–º–∞—Ç—å'},{pl:'pamiƒôtaƒá',ru:'–ø–æ–º–Ω–∏—Ç—å'},{pl:'zapominaƒá',ru:'–∑–∞–±—ã–≤–∞—Ç—å'},{pl:'szukaƒá',ru:'–∏—Å–∫–∞—Ç—å'},{pl:'znajdowaƒá',ru:'–Ω–∞—Ö–æ–¥–∏—Ç—å'},
  {pl:'graƒá',ru:'–∏–≥—Ä–∞—Ç—å'},{pl:'oglƒÖdaƒá',ru:'—Å–º–æ—Ç—Ä–µ—Ç—å'},{pl:'s≈Çuchaƒá',ru:'—Å–ª—É—à–∞—Ç—å'},{pl:'pytaƒá',ru:'—Å–ø—Ä–∞—à–∏–≤–∞—Ç—å'},{pl:'odpowiadaƒá',ru:'–æ—Ç–≤–µ—á–∞—Ç—å'},
  {pl:'pomagaƒá',ru:'–ø–æ–º–æ–≥–∞—Ç—å'},{pl:'potrzebowaƒá',ru:'–Ω—É–∂–¥–∞—Ç—å—Å—è'},{pl:'czuƒá',ru:'—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å'},{pl:'wybieraƒá',ru:'–≤—ã–±–∏—Ä–∞—Ç—å'},{pl:'zmieniaƒá',ru:'–º–µ–Ω—è—Ç—å'},
  {pl:'trzymaƒá',ru:'–¥–µ—Ä–∂–∞—Ç—å'},{pl:'nosiƒá',ru:'–Ω–æ—Å–∏—Ç—å'},{pl:'sprzƒÖtaƒá',ru:'—É–±–∏—Ä–∞—Ç—å'},{pl:'gotowaƒá',ru:'–≥–æ—Ç–æ–≤–∏—Ç—å'},{pl:'p≈Çaciƒá',ru:'–ø–ª–∞—Ç–∏—Ç—å'},
  {pl:'p≈Çakaƒá',ru:'–ø–ª–∞–∫–∞—Ç—å'},{pl:'≈õmiaƒá siƒô',ru:'—Å–º–µ—è—Ç—å—Å—è'},{pl:'baƒá siƒô',ru:'–±–æ—è—Ç—å—Å—è'},{pl:'prosiƒá',ru:'–ø—Ä–æ—Å–∏—Ç—å'},{pl:'dziƒôkowaƒá',ru:'–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å'},
  {pl:'spotkaƒá',ru:'–≤—Å—Ç—Ä–µ—Ç–∏—Ç—å'},{pl:'rozmawiaƒá',ru:'—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å'},{pl:'wychodziƒá',ru:'–≤—ã—Ö–æ–¥–∏—Ç—å'},{pl:'wchodziƒá',ru:'–≤—Ö–æ–¥–∏—Ç—å'},
  // —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ (–±—ã—Ç/–º–µ—Å—Ç–∞/–µ–¥–∞)
  {pl:'dzie≈Ñ',ru:'–¥–µ–Ω—å'},{pl:'noc',ru:'–Ω–æ—á—å'},{pl:'rano',ru:'—É—Ç—Ä–æ'},{pl:'wiecz√≥r',ru:'–≤–µ—á–µ—Ä'},{pl:'dom',ru:'–¥–æ–º'},
  {pl:'mieszkanie',ru:'–∫–≤–∞—Ä—Ç–∏—Ä–∞'},{pl:'pok√≥j',ru:'–∫–æ–º–Ω–∞—Ç–∞'},{pl:'kuchnia',ru:'–∫—É—Ö–Ω—è'},{pl:'≈Çazienka',ru:'–≤–∞–Ω–Ω–∞—è'},{pl:'szko≈Ça',ru:'—à–∫–æ–ª–∞'},
  {pl:'praca',ru:'—Ä–∞–±–æ—Ç–∞'},{pl:'firma',ru:'–∫–æ–º–ø–∞–Ω–∏—è'},{pl:'miasto',ru:'–≥–æ—Ä–æ–¥'},{pl:'kraj',ru:'—Å—Ç—Ä–∞–Ω–∞'},{pl:'ulica',ru:'—É–ª–∏—Ü–∞'},
  {pl:'sklep',ru:'–º–∞–≥–∞–∑–∏–Ω'},{pl:'bank',ru:'–±–∞–Ω–∫'},{pl:'restauracja',ru:'—Ä–µ—Å—Ç–æ—Ä–∞–Ω'},{pl:'szpital',ru:'–±–æ–ª—å–Ω–∏—Ü–∞'},{pl:'autobus',ru:'–∞–≤—Ç–æ–±—É—Å'},
  {pl:'pociƒÖg',ru:'–ø–æ–µ–∑–¥'},{pl:'samoch√≥d',ru:'–∞–≤—Ç–æ–º–æ–±–∏–ª—å'},{pl:'rower',ru:'–≤–µ–ª–æ—Å–∏–ø–µ–¥'},{pl:'telefon',ru:'—Ç–µ–ª–µ—Ñ–æ–Ω'},{pl:'komputer',ru:'–∫–æ–º–ø—å—é—Ç–µ—Ä'},
  {pl:'ksiƒÖ≈ºka',ru:'–∫–Ω–∏–≥–∞'},{pl:'gazeta',ru:'–≥–∞–∑–µ—Ç–∞'},{pl:'st√≥≈Ç',ru:'—Å—Ç–æ–ª'},{pl:'krzes≈Ço',ru:'—Å—Ç—É–ª'},{pl:'≈Ç√≥≈ºko',ru:'–∫—Ä–æ–≤–∞—Ç—å'},
  {pl:'okno',ru:'–æ–∫–Ω–æ'},{pl:'drzwi',ru:'–¥–≤–µ—Ä—å'},{pl:'woda',ru:'–≤–æ–¥–∞'},{pl:'chleb',ru:'—Ö–ª–µ–±'},{pl:'mleko',ru:'–º–æ–ª–æ–∫–æ'},
  {pl:'kawa',ru:'–∫–æ—Ñ–µ'},{pl:'herbata',ru:'—á–∞–π'},{pl:'zupa',ru:'—Å—É–ø'},{pl:'miƒôso',ru:'–º—è—Å–æ'},{pl:'ryba',ru:'—Ä—ã–±–∞'},
  {pl:'owoc',ru:'—Ñ—Ä—É–∫—Ç'},{pl:'warzywo',ru:'–æ–≤–æ—â'},{pl:'jab≈Çko',ru:'—è–±–ª–æ–∫–æ'},{pl:'banan',ru:'–±–∞–Ω–∞–Ω'},{pl:'pomidor',ru:'–ø–æ–º–∏–¥–æ—Ä'},
  {pl:'og√≥rek',ru:'–æ–≥—É—Ä–µ—Ü'},{pl:'ziemniak',ru:'–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å'},{pl:'marchew',ru:'–º–æ—Ä–∫–æ–≤—å'},{pl:'cebula',ru:'–ª—É–∫'},{pl:'cukier',ru:'—Å–∞—Ö–∞—Ä'},
  {pl:'s√≥l',ru:'—Å–æ–ª—å'},{pl:'pies',ru:'—Å–æ–±–∞–∫–∞'},{pl:'kot',ru:'–∫–æ—Ç'},{pl:'ptak',ru:'–ø—Ç–∏—Ü–∞'},{pl:'las',ru:'–ª–µ—Å'},
  {pl:'morze',ru:'–º–æ—Ä–µ'},{pl:'g√≥ra',ru:'–≥–æ—Ä–∞'},{pl:'jezioro',ru:'–æ–∑–µ—Ä–æ'},{pl:'droga',ru:'–¥–æ—Ä–æ–≥–∞'},{pl:'czas',ru:'–≤—Ä–µ–º—è'},
  {pl:'rƒôka',ru:'—Ä—É–∫–∞'},{pl:'g≈Çowa',ru:'–≥–æ–ª–æ–≤–∞'},{pl:'oko',ru:'–≥–ª–∞–∑'},
  // –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ + —Ü–≤–µ—Ç–∞
  {pl:'nowy',ru:'–Ω–æ–≤—ã–π'},{pl:'stary',ru:'—Å—Ç–∞—Ä—ã–π'},{pl:'dobry',ru:'—Ö–æ—Ä–æ—à–∏–π'},{pl:'z≈Çy',ru:'–ø–ª–æ—Ö–æ–π'},{pl:'du≈ºy',ru:'–±–æ–ª—å—à–æ–π'},
  {pl:'ma≈Çy',ru:'–º–∞–ª–µ–Ω—å–∫–∏–π'},{pl:'szybki',ru:'–±—ã—Å—Ç—Ä—ã–π'},{pl:'wolny',ru:'–º–µ–¥–ª–µ–Ω–Ω—ã–π'},{pl:'≈Çatwy',ru:'–ª—ë–≥–∫–∏–π'},{pl:'trudny',ru:'—Ç—Ä—É–¥–Ω—ã–π'},
  {pl:'drogi',ru:'–¥–æ—Ä–æ–≥–æ–π'},{pl:'tani',ru:'–¥–µ—à—ë–≤—ã–π'},{pl:'ciep≈Çy',ru:'—Ç—ë–ø–ª—ã–π'},{pl:'zimny',ru:'—Ö–æ–ª–æ–¥–Ω—ã–π'},{pl:'piƒôkny',ru:'–∫—Ä–∞—Å–∏–≤—ã–π'},
  {pl:'brzydki',ru:'–Ω–µ–∫—Ä–∞—Å–∏–≤—ã–π'},{pl:'wa≈ºny',ru:'–≤–∞–∂–Ω—ã–π'},{pl:'bia≈Çy',ru:'–±–µ–ª—ã–π'},{pl:'czarny',ru:'—á—ë—Ä–Ω—ã–π'},{pl:'czerwony',ru:'–∫—Ä–∞—Å–Ω—ã–π'},
  {pl:'niebieski',ru:'—Å–∏–Ω–∏–π/–≥–æ–ª—É–±–æ–π'},{pl:'zielony',ru:'–∑–µ–ª—ë–Ω—ã–π'},{pl:'≈º√≥≈Çty',ru:'–∂—ë–ª—Ç—ã–π'},
  // –¥–Ω–∏/–≤—Ä–µ–º—è
  {pl:'dzi≈õ',ru:'—Å–µ–≥–æ–¥–Ω—è'},{pl:'jutro',ru:'–∑–∞–≤—Ç—Ä–∞'},{pl:'wczoraj',ru:'–≤—á–µ—Ä–∞'},{pl:'godzina',ru:'—á–∞—Å'},{pl:'tydzie≈Ñ',ru:'–Ω–µ–¥–µ–ª—è'},
  {pl:'miesiƒÖc',ru:'–º–µ—Å—è—Ü'},{pl:'rok',ru:'–≥–æ–¥'},{pl:'poniedzia≈Çek',ru:'–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫'},{pl:'wtorek',ru:'–≤—Ç–æ—Ä–Ω–∏–∫'},{pl:'≈õroda',ru:'—Å—Ä–µ–¥–∞'},
  {pl:'czwartek',ru:'—á–µ—Ç–≤–µ—Ä–≥'},{pl:'piƒÖtek',ru:'–ø—è—Ç–Ω–∏—Ü–∞'},{pl:'sobota',ru:'—Å—É–±–±–æ—Ç–∞'},{pl:'niedziela',ru:'–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'}
];

// ===== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–ê–ö–ï–¢–´ (–¥–æ–±–∏–≤–∞–µ–º –¥–æ ~400)
const EXTRA=[
  // –º–µ—Å—è—Ü—ã/—Å–µ–∑–æ–Ω—ã/–ø–æ–≥–æ–¥–∞/—Ü–≤–µ—Ç–∞/—Ñ–æ—Ä–º—ã
  {pl:'stycze≈Ñ',ru:'—è–Ω–≤–∞—Ä—å'},{pl:'luty',ru:'—Ñ–µ–≤—Ä–∞–ª—å'},{pl:'marzec',ru:'–º–∞—Ä—Ç'},{pl:'kwiecie≈Ñ',ru:'–∞–ø—Ä–µ–ª—å'},{pl:'maj',ru:'–º–∞–π'},{pl:'czerwiec',ru:'–∏—é–Ω—å'},{pl:'lipiec',ru:'–∏—é–ª—å'},{pl:'sierpie≈Ñ',ru:'–∞–≤–≥—É—Å—Ç'},{pl:'wrzesie≈Ñ',ru:'—Å–µ–Ω—Ç—è–±—Ä—å'},{pl:'pa≈∫dziernik',ru:'–æ–∫—Ç—è–±—Ä—å'},{pl:'listopad',ru:'–Ω–æ—è–±—Ä—å'},{pl:'grudzie≈Ñ',ru:'–¥–µ–∫–∞–±—Ä—å'},
  {pl:'wiosna',ru:'–≤–µ—Å–Ω–∞'},{pl:'lato',ru:'–ª–µ—Ç–æ'},{pl:'jesie≈Ñ',ru:'–æ—Å–µ–Ω—å'},{pl:'zima',ru:'–∑–∏–º–∞'},{pl:'pogoda',ru:'–ø–æ–≥–æ–¥–∞'},{pl:'deszcz',ru:'–¥–æ–∂–¥—å'},{pl:'≈õnieg',ru:'—Å–Ω–µ–≥'},{pl:'wiatr',ru:'–≤–µ—Ç–µ—Ä'},{pl:'s≈Ço≈Ñce',ru:'—Å–æ–ª–Ω—Ü–µ'},
  {pl:'brƒÖzowy',ru:'–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π'},{pl:'szary',ru:'—Å–µ—Ä—ã–π'},{pl:'r√≥≈ºowy',ru:'—Ä–æ–∑–æ–≤—ã–π'},{pl:'pomara≈Ñczowy',ru:'–æ—Ä–∞–Ω–∂–µ–≤—ã–π'},{pl:'okrƒÖg≈Çy',ru:'–∫—Ä—É–≥–ª—ã–π'},{pl:'kwadratowy',ru:'–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π'},{pl:'tr√≥jkƒÖtny',ru:'—Ç—Ä–µ—É–≥–æ–ª—å–Ω—ã–π'},
  // –æ–¥–µ–∂–¥–∞
  {pl:'koszula',ru:'—Ä—É–±–∞—à–∫–∞'},{pl:'spodnie',ru:'—à—Ç–∞–Ω—ã'},{pl:'sukienka',ru:'–ø–ª–∞—Ç—å–µ'},{pl:'buty',ru:'–æ–±—É–≤—å'},{pl:'kurtka',ru:'–∫—É—Ä—Ç–∫–∞'},{pl:'p≈Çaszcz',ru:'–ø–∞–ª—å—Ç–æ'},{pl:'sweter',ru:'—Å–≤–∏—Ç–µ—Ä'},{pl:'skarpetki',ru:'–Ω–æ—Å–∫–∏'},{pl:'czapka',ru:'—à–∞–ø–∫–∞'},{pl:'rƒôkawiczki',ru:'–ø–µ—Ä—á–∞—Ç–∫–∏'},
  // —Å–µ–º—å—è/–ª—é–¥–∏/–ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
  {pl:'matka',ru:'–º–∞—Ç—å'},{pl:'ojciec',ru:'–æ—Ç–µ—Ü'},{pl:'syn',ru:'—Å—ã–Ω'},{pl:'c√≥rka',ru:'–¥–æ—á—å'},{pl:'brat',ru:'–±—Ä–∞—Ç'},{pl:'siostra',ru:'—Å–µ—Å—Ç—Ä–∞'},{pl:'mƒÖ≈º',ru:'–º—É–∂'},{pl:'≈ºona',ru:'–∂–µ–Ω–∞'},
  {pl:'lekarz',ru:'–≤—Ä–∞—á'},{pl:'pielƒôgniarka',ru:'–º–µ–¥—Å–µ—Å—Ç—Ä–∞'},{pl:'nauczyciel',ru:'—É—á–∏—Ç–µ–ª—å'},{pl:'ucze≈Ñ',ru:'—É—á–µ–Ω–∏–∫'},{pl:'kierowca',ru:'–≤–æ–¥–∏—Ç–µ–ª—å'},{pl:'sprzedawca',ru:'–ø—Ä–æ–¥–∞–≤–µ—Ü'},{pl:'kelner',ru:'–æ—Ñ–∏—Ü–∏–∞–Ω—Ç'},{pl:'programista',ru:'–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç'},{pl:'szef',ru:'—à–µ—Ñ/–Ω–∞—á–∞–ª—å–Ω–∏–∫'},
  // –¥–æ–º/–ø—Ä–µ–¥–º–µ—Ç—ã
  {pl:'lod√≥wka',ru:'—Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫'},{pl:'piekarnik',ru:'–¥—É—Ö–æ–≤–∫–∞'},{pl:'kuchenka',ru:'–ø–ª–∏—Ç–∞'},{pl:'zmywarka',ru:'–ø–æ—Å—É–¥–æ–º–æ–π–∫–∞'},{pl:'pralka',ru:'—Å—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞'},{pl:'telewizor',ru:'—Ç–µ–ª–µ–≤–∏–∑–æ—Ä'},{pl:'pilot',ru:'–ø—É–ª—å—Ç'},{pl:'≈ºar√≥wka',ru:'–ª–∞–º–ø–æ—á–∫–∞'},{pl:'gniazdko',ru:'—Ä–æ–∑–µ—Ç–∫–∞'},{pl:'przed≈Çu≈ºacz',ru:'—É–¥–ª–∏–Ω–∏—Ç–µ–ª—å'},
  {pl:'talerz',ru:'—Ç–∞—Ä–µ–ª–∫–∞'},{pl:'kubek',ru:'–∫—Ä—É–∂–∫–∞'},{pl:'szklanka',ru:'—Å—Ç–∞–∫–∞–Ω'},{pl:'widelec',ru:'–≤–∏–ª–∫–∞'},{pl:'n√≥≈º',ru:'–Ω–æ–∂'},{pl:'≈Çy≈ºka',ru:'–ª–æ–∂–∫–∞'},
  // —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç/–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
  {pl:'lotnisko',ru:'–∞—ç—Ä–æ–ø–æ—Ä—Ç'},{pl:'bilet',ru:'–±–∏–ª–µ—Ç'},{pl:'paszport',ru:'–ø–∞—Å–ø–æ—Ä—Ç'},{pl:'walizka',ru:'—á–µ–º–æ–¥–∞–Ω'},{pl:'odprawa',ru:'—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è'},{pl:'odlot',ru:'–≤—ã–ª–µ—Ç'},{pl:'przylot',ru:'–ø—Ä–∏–ª—ë—Ç'},{pl:'peron',ru:'–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞'},{pl:'przystanek',ru:'–æ—Å—Ç–∞–Ω–æ–≤–∫–∞'},
  // –µ–¥–∞(+)
  {pl:'ser',ru:'—Å—ã—Ä'},{pl:'mas≈Ço',ru:'–º–∞—Å–ª–æ'},{pl:'jajko',ru:'—è–π—Ü–æ'},{pl:'szynka',ru:'–≤–µ—Ç—á–∏–Ω–∞'},{pl:'kurczak',ru:'–∫—É—Ä–∏—Ü–∞'},{pl:'wo≈Çowina',ru:'–≥–æ–≤—è–¥–∏–Ω–∞'},{pl:'wieprzowina',ru:'—Å–≤–∏–Ω–∏–Ω–∞'},{pl:'makaron',ru:'–º–∞–∫–∞—Ä–æ–Ω—ã'},{pl:'ry≈º',ru:'—Ä–∏—Å'},{pl:'kasza',ru:'–∫—Ä—É–ø–∞'},
  {pl:'ciasto',ru:'–ø–∏—Ä–æ–≥'},{pl:'cukierki',ru:'–∫–æ–Ω—Ñ–µ—Ç—ã'},{pl:'lody',ru:'–º–æ—Ä–æ–∂–µ–Ω–æ–µ'},{pl:'sok',ru:'—Å–æ–∫'},{pl:'nap√≥j',ru:'–Ω–∞–ø–∏—Ç–æ–∫'},{pl:'piwo',ru:'–ø–∏–≤–æ'},{pl:'wino',ru:'–≤–∏–Ω–æ'},
  // —Ç–µ–ª–æ
  {pl:'usta',ru:'–≥—É–±—ã'},{pl:'zƒôby',ru:'–∑—É–±—ã'},{pl:'nos',ru:'–Ω–æ—Å'},{pl:'ucho',ru:'—É—Ö–æ'},{pl:'w≈Çosy',ru:'–≤–æ–ª–æ—Å—ã'},{pl:'plecy',ru:'—Å–ø–∏–Ω–∞'},{pl:'noga',ru:'–Ω–æ–≥–∞'},{pl:'stopa',ru:'—Å—Ç–æ–ø–∞'},{pl:'kolano',ru:'–∫–æ–ª–µ–Ω–æ'},{pl:'brzuch',ru:'–∂–∏–≤–æ—Ç'},
  // –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ(+)
  {pl:'wysoki',ru:'–≤—ã—Å–æ–∫–∏–π'},{pl:'niski',ru:'–Ω–∏–∑–∫–∏–π'},{pl:'d≈Çugi',ru:'–¥–ª–∏–Ω–Ω—ã–π'},{pl:'kr√≥tki',ru:'–∫–æ—Ä–æ—Ç–∫–∏–π'},{pl:'szeroki',ru:'—à–∏—Ä–æ–∫–∏–π'},{pl:'wƒÖski',ru:'—É–∑–∫–∏–π'},{pl:'czysty',ru:'—á–∏—Å—Ç—ã–π'},{pl:'brudny',ru:'–≥—Ä—è–∑–Ω—ã–π'},{pl:'g≈Ço≈õny',ru:'–≥—Ä–æ–º–∫–∏–π'},{pl:'cichy',ru:'—Ç–∏—Ö–∏–π'},
  // –≥–ª–∞–≥–æ–ª—ã(+)
  {pl:'p≈Çywaƒá',ru:'–ø–ª–∞–≤–∞—Ç—å'},{pl:'ta≈Ñczyƒá',ru:'—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å'},{pl:'≈õpiewaƒá',ru:'–ø–µ—Ç—å'},{pl:'malowaƒá',ru:'—Ä–∏—Å–æ–≤–∞—Ç—å/–∫—Ä–∞—Å–∏—Ç—å'},{pl:'fotografowaƒá',ru:'—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞—Ç—å'},{pl:'podr√≥≈ºowaƒá',ru:'–ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞—Ç—å'},{pl:'zamawiaƒá',ru:'–∑–∞–∫–∞–∑—ã–≤–∞—Ç—å'},{pl:'mieszkaƒá',ru:'–∂–∏—Ç—å (–ø—Ä–æ–∂–∏–≤–∞—Ç—å)'},{pl:'wynajmowaƒá',ru:'—Å–Ω–∏–º–∞—Ç—å (–∂–∏–ª—å—ë)'},{pl:'u≈ºywaƒá',ru:'–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å'},{pl:'w≈ÇƒÖczyƒá',ru:'–≤–∫–ª—é—á–∏—Ç—å'},{pl:'wy≈ÇƒÖczyƒá',ru:'–≤—ã–∫–ª—é—á–∏—Ç—å'},
  // —Ä–∞–∑–Ω–æ–µ
  {pl:'wa≈ºne',ru:'–≤–∞–∂–Ω–æ'},{pl:'prawda',ru:'–ø—Ä–∞–≤–¥–∞'},{pl:'k≈Çamstwo',ru:'–ª–æ–∂—å'},{pl:'b≈ÇƒÖd',ru:'–æ—à–∏–±–∫–∞'},{pl:'pytanie',ru:'–≤–æ–ø—Ä–æ—Å'},{pl:'odpowied≈∫',ru:'–æ—Ç–≤–µ—Ç'},{pl:'wej≈õcie',ru:'–≤—Ö–æ–¥'},{pl:'wyj≈õcie',ru:'–≤—ã—Ö–æ–¥'},{pl:'otwarte',ru:'–æ—Ç–∫—Ä—ã—Ç–æ'},{pl:'zamkniƒôte',ru:'–∑–∞–∫—Ä—ã—Ç–æ'}
];

WORDS.push(...EXTRA);

// ===== –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–ª–æ–≤–∞—Ä—è
const keyOf=p=>`${p.pl}|${p.ru}`;
const availableWords=()=>WORDS.filter(p=>!LEARNED.has(keyOf(p)));

function updateFooterCount(){ const total=WORDS.length; const left=availableWords().length; const el=$('#footCount'); if(el) el.textContent=`${left} –∏–∑ ${total}`; }

// ===== –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—É–Ω–¥–∞
function makeRound(){
  const avail=availableWords();
  if(avail.length<10){ $('#status').textContent=`–û—Å—Ç–∞–ª–æ—Å—å —Å–ª–æ–≤: ${avail.length}`; }
  const pool=shuffle([...avail]).slice(0,10);
  const firstFive=pool.slice(0,5).map(p=>({show:'pl',pair:p}));
  const secondFive=pool.slice(5).map(p=>({show:'ru',pair:p}));
  const mix=shuffle([...firstFive,...secondFive]);

  const prompts=$('#prompts'); prompts.innerHTML='';
  const slots=$('#slots'); slots.innerHTML='';
  const choices=$('#choices'); choices.innerHTML='';

  // –ª–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞
  mix.forEach((item,idx)=>{
    const isPL=item.show==='pl';
    const text=isPL?item.pair.pl:item.pair.ru;
    const p=document.createElement('div'); p.className='prompt'; p.dataset.answer=isPL?item.pair.ru:item.pair.pl; p.dataset.row=idx; p.dataset.key=keyOf(item.pair); p.textContent=text;
    // TTS —Å–ø—Ä–∞–≤–∞
    const btn=document.createElement('button'); btn.title='–û–∑–≤—É—á–∏—Ç—å'; btn.textContent='üîà'; Object.assign(btn.style,{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',border:'1px solid #e5e7eb',background:'#fff',borderRadius:'10px',padding:'6px 10px',lineHeight:'1',height:'32px'});
    if(isPL){ btn.addEventListener('click',()=>speakPL(item.pair.pl)); } else { btn.style.visibility='hidden'; btn.tabIndex=-1; }
    p.appendChild(btn);
    // –≥–∞–ª–∫–∞ —Å–ª–µ–≤–∞ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ä–∞—É–Ω–¥–∞)
    const mark=document.createElement('button'); mark.title='–ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –≤—ã—É—á–µ–Ω–Ω–æ–µ'; mark.textContent='‚úÖ'; Object.assign(mark.style,{position:'absolute',left:'10px',top:'50%',transform:'translateY(-50%)',border:'1px solid #22c55e66',background:'#22c55e22',borderRadius:'10px',padding:'6px 10px',lineHeight:'1',height:'32px',display:'none'});
    mark.addEventListener('click',()=>{ LEARNED.add(p.dataset.key); saveLearned(LEARNED); p.style.opacity='.35'; mark.disabled=true; updateFooterCount(); });
    p.appendChild(mark);

    prompts.appendChild(p);

    const s=document.createElement('div'); s.className='slot'; s.dataset.row=idx; slots.appendChild(s);
  });

  // –ø—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞
  const tiles=mix.map(it=>({ value: it.show==='pl'?it.pair.ru:it.pair.pl, isPL: it.show==='ru' }));
  const colors=['c1','c2','c3','c4','c5','c6','c7','c8'];
  shuffle(tiles).forEach((t,i)=>{
    const el=document.createElement('div'); el.className='tile '+colors[i%colors.length]; el.draggable=true; el.dataset.value=t.value; el.textContent=t.value;
    const b=document.createElement('button'); b.textContent='üîà'; Object.assign(b.style,{position:'absolute',right:'10px',top:'50%',transform:'translateY(-50%)',border:'1px solid #ffffff66',background:'#ffffff22',borderRadius:'10px',padding:'6px 10px',lineHeight:'1',height:'32px'});
    if(t.isPL){ b.addEventListener('click',(e)=>{ e.stopPropagation(); speakPL(t.value); }); } else { b.style.visibility='hidden'; b.tabIndex=-1; }
    el.appendChild(b);
    choices.appendChild(el);
  });

  alignFix(); dndInit(); updateStatus(); updateFooterCount();
}

// –Ω–µ –¥–æ–ø—É—Å–∫–∞—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π ¬´–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —É–∂–µ –Ω–∞–ø—Ä–æ—Ç–∏–≤¬ª
function alignFix(){
  const vals=$$('#choices .tile').map(x=>x.dataset.value);
  const answers=$$('#prompts .prompt').map(x=>x.dataset.answer);
  for(let i=0;i<Math.min(vals.length,answers.length);i++){
    if(vals[i]===answers[i]){ const j=(i+1)%vals.length; const a=$('#choices .tile:nth-child('+(i+1)+')'); const b=$('#choices .tile:nth-child('+(j+1)+')'); if(a&&b) a.parentNode.insertBefore(b,a); }
  }
}

function dndInit(){
  let drag=null;
  $('#choices').addEventListener('dragstart',e=>{ const t=e.target.closest('.tile'); if(!t) return; drag=t; e.dataTransfer.setData('text/plain',t.dataset.value); });
  $$('#slots .slot').forEach(slot=>{
    slot.addEventListener('dragover',e=>{ e.preventDefault(); slot.classList.add('over'); });
    slot.addEventListener('dragleave',()=>slot.classList.remove('over'));
    slot.addEventListener('drop',e=>{ e.preventDefault(); slot.classList.remove('over'); if(!drag) return; const value=drag.dataset.value; const row=slot.dataset.row; const need=$(`#prompts .prompt[data-row="${row}"]`).dataset.answer; if(value===need){ slot.classList.remove('bad'); slot.classList.add('filled','ok'); slot.textContent=value; drag.remove(); } else { slot.classList.add('bad'); setTimeout(()=>slot.classList.remove('bad'),400); } updateStatus(); });
  });
}

function updateStatus(){ const done=$$('#slots .slot.ok').length; $('#status').textContent=`–í–µ—Ä–Ω–æ: ${done}/10`; toggleMarkButtons(done===10); }
function toggleMarkButtons(show){ $$('#prompts .prompt').forEach(p=>{ const b=p.querySelector('button'); /* first is TTS */ const mark=p.querySelectorAll('button')[1]; if(mark) mark.style.display = show ? 'inline-block' : 'none'; }); }

// ===== TTS
function speakPL(text){ try{ const u=new SpeechSynthesisUtterance(text); u.lang='pl-PL'; u.rate=1.0; speechSynthesis.cancel(); speechSynthesis.speak(u);}catch(e){} }

// ===== –°—Ç–∞—Ä—Ç
$('#newRound').addEventListener('click',makeRound); makeRound();
</script>
</body>
</html>
